<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mini Trader Cashout</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    h1 {
      margin-bottom: 10px;
      color: #ffcc00;
      font-size: 1.8rem;
      text-shadow: 0 0 8px rgba(255, 204, 0, 0.4);
    }

    #chartContainer {
      width: 300px;
      height: 200px;
      background: #111;
      border-radius: 15px;
      margin-bottom: 20px;
      overflow: hidden;
      box-shadow: 0 0 20px rgba(255,204,0,0.3);
    }

    canvas {
      display: block;
    }

    .multiplier-box {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 10px;
      color: #ffcc00;
      text-shadow: 0 0 10px rgba(255,204,0,0.6);
    }

    .timer {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #ff5555;
      font-weight: bold;
    }

    #cashoutBtn {
      padding: 14px 28px;
      font-size: 1.2rem;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      background: #ffcc00;
      color: #000;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 204, 0, 0.4);
    }

    #cashoutBtn:hover {
      background: #ffdb4d;
      transform: scale(1.05);
    }

    /* Modal Base */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease;
      z-index: 1000;
    }
    .modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: #2a2a2a;
      padding: 25px;
      border-radius: 15px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      animation: slideUp 0.4s ease;
      box-shadow: 0 8px 25px rgba(0,0,0,0.5);
    }

    @keyframes slideUp {
      from {transform: translateY(50px); opacity: 0;}
      to {transform: translateY(0); opacity: 1;}
    }

    .modal-content h2 {
      margin-bottom: 15px;
      color: #ffcc00;
    }

    .modal-content p {
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .modal-content button {
      margin: 10px;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }

    .registerBtn { background: #ffcc00; color: #000; }
    .redeemBtn { background: #444; color: #fff; }

    .registerBtn:hover { background: #ffdb4d; transform: scale(1.05); }
    .redeemBtn:hover { background: #555; transform: scale(1.05); }

    @media(max-width: 480px){
      h1 { font-size: 1.4rem; }
      .multiplier-box { font-size: 2rem; }
      #cashoutBtn { width: 80%; font-size: 1rem; }
      #chartContainer { width: 90%; height: 150px; }
    }
  </style>
</head>
<body>
  <h1>Mini Trader ao Vivo</h1>
  <div id="chartContainer">
    <canvas id="chart" width="300" height="200"></canvas>
  </div>
  <div class="multiplier-box" id="multiplier">1.00x</div>
  <div class="timer">Tempo restante: <span id="timer">120</span>s</div>
  <button id="cashoutBtn">Cashout</button>

  <!-- Modal Cashout -->
  <div class="modal" id="modalCashout">
    <div class="modal-content">
      <h2>Parab√©ns!</h2>
      <p>Ganhaste <span id="winValue">0</span> MZN!</p>
      <button class="registerBtn" id="redeemBtn">Resgatar</button>
    </div>
  </div>

  <!-- Modal Registro -->
  <div class="modal" id="modalRegister">
    <div class="modal-content">
      <h2>Registrar-se</h2>
      <p>Para resgatar seu valor, fa√ßa seu cadastro e um dep√≥sito m√≠nimo de <strong>50 MZN</strong>.</p>
      <button class="registerBtn" id="goToSite">Ir para casa de apostas</button>
    </div>
  </div>

  <!-- Modal Perdeu -->
  <div class="modal" id="modalLose">
    <div class="modal-content">
      <h2>Ops!</h2>
      <p>O multiplicador explodiu! üò¢</p>
      <button class="redeemBtn" onclick="location.reload()">Tentar de novo</button>
    </div>
  </div>

  <script>
    // --- Multiplicador e gr√°fico ---
    const multiplierEl = document.getElementById("multiplier");
    const timerEl = document.getElementById("timer");
    const canvas = document.getElementById("chart");
    const ctx = canvas.getContext("2d");
    let multiplier = 1.00;
    let running = true;
    let timeLeft = 120;
    let oscillation = 0;
    const dataPoints = [];
    const maxPoints = canvas.width;

    function updateChart(){
      if(running){
        // Atualiza multiplicador com oscila√ß√£o
        oscillation += 0.05;
        multiplier += 0.02 * Math.sin(oscillation) + 0.01;
        multiplierEl.textContent = multiplier.toFixed(2) + "x";

        // Adiciona ponto no gr√°fico
        dataPoints.push(multiplier);
        if(dataPoints.length > maxPoints){
          dataPoints.shift();
        }

        // Desenha gr√°fico
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.beginPath();
        ctx.moveTo(0, canvas.height - dataPoints[0]*20);
        for(let i=1;i<dataPoints.length;i++){
          ctx.lineTo(i, canvas.height - dataPoints[i]*20);
        }
        ctx.strokeStyle = "#ffcc00";
        ctx.lineWidth = 2;
        ctx.stroke();
      }
      requestAnimationFrame(updateChart);
    }
    updateChart();

    // Timer regressivo
    const countdown = setInterval(()=>{
      if(running){
        timeLeft--;
        timerEl.textContent = timeLeft;
        if(timeLeft <= 0){
          running = false;
          clearInterval(countdown);
          document.getElementById("modalLose").classList.add("active");
        }
      }
    },1000);

    // --- Modais ---
    const cashoutBtn = document.getElementById("cashoutBtn");
    const modalCashout = document.getElementById("modalCashout");
    const modalRegister = document.getElementById("modalRegister");
    const redeemBtn = document.getElementById("redeemBtn");
    const goToSite = document.getElementById("goToSite");
    const winValueEl = document.getElementById("winValue");

    let winAmount = 0;

    cashoutBtn.addEventListener("click", ()=>{
      if(!running) return;
      running = false;
      winAmount = (multiplier * 10).toFixed(2);
      winValueEl.textContent = winAmount;
      modalCashout.classList.add("active");
      clearInterval(countdown);
    });

    redeemBtn.addEventListener("click", ()=>{
      modalCashout.classList.remove("active");
      modalRegister.classList.add("active");
    });

    goToSite.addEventListener("click", ()=>{
      window.open("https://go.aff.betvivo.partners/wydkfw29", "_blank");
    });

    // Fechar modal ao clicar fora
    document.querySelectorAll(".modal").forEach(modal=>{
      modal.addEventListener("click", e=>{
        if(e.target === modal){
          modal.classList.remove("active");
        }
      });
    });
  </script>
</body>
</html>
