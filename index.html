<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Trader Aviator</title>
<style>
body{
  margin:0;
  font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;
  background:#111;
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:10px;
}
h1{
  color:#ffcc00;
  text-shadow:0 0 15px rgba(255,204,0,0.7);
  text-align:center;
  margin-bottom:10px;
}

/* Saldo e apostas no topo */
.top-bar{
  width:90%; max-width:400px;
  background:#222;
  padding:10px 15px;
  border-radius:12px;
  margin-bottom:10px;
  display:flex;
  flex-direction:column;
}
.balance-section{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
}
.balance-section span{font-weight:bold; font-size:1.1rem;}
.bet-section{
  display:flex;
  gap:8px;
}
.bet-section input[type=number]{
  flex:1;
  padding:6px;
  border-radius:8px;
  border:none;
  text-align:center;
}
.bet-section button{
  padding:6px 10px;
  border:none;
  border-radius:8px;
  background:#ffcc00;
  color:#000;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}
.bet-section button:hover{opacity:0.8;}

/* Trader */
#chartContainer{
  width:90%;
  max-width:400px;
  height:220px;
  background:#222;
  border-radius:15px;
  margin-bottom:10px;
  overflow:hidden;
  position:relative;
  box-shadow:0 0 25px rgba(255,204,0,0.4);
}
canvas{display:block;}

/* Multiplicador */
#multiplier{
  position:absolute;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  font-size:2.2rem;
  font-weight:bold;
  color:#ffcc00;
  text-shadow:0 0 15px rgba(255,204,0,0.8);
}

/* Cashout */
#cashoutBtn{
  padding:12px 28px;
  font-size:1.1rem;
  font-weight:bold;
  border:none;
  border-radius:10px;
  background:#ffcc00;
  color:#000;
  cursor:pointer;
  box-shadow:0 4px 25px rgba(255,204,0,0.7);
  animation: pulse 1.2s infinite;
  margin-bottom:20px;
}
@keyframes pulse{
  0%,100%{box-shadow:0 0 25px rgba(255,204,0,0.5);}
  50%{box-shadow:0 0 50px rgba(255,255,0,0.9);}
}
#cashoutBtn:hover{transform:scale(1.05);}

/* Modal */
.modal{
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.85);
  display:flex; align-items:center; justify-content:center;
  opacity:0; visibility:hidden; transition:opacity 0.3s ease;
  z-index:1000;
}
.modal.active{opacity:1; visibility:visible;}
.modal-content{
  background:#2a2a2a; padding:25px; border-radius:15px; max-width:400px; width:90%; text-align:center;
  animation:slideUp 0.4s ease; box-shadow:0 8px 25px rgba(0,0,0,0.6);
}
@keyframes slideUp{from{transform:translateY(50px);opacity:0;}to{transform:translateY(0);opacity:1;}}
.modal-content h2{margin-bottom:15px;color:#ffcc00;}
.modal-content p{margin-bottom:20px; line-height:1.5;}
.modal-content button{
  margin:10px;padding:12px 20px;border:none;border-radius:8px;font-weight:bold;cursor:pointer; transition:0.3s;
}
.registerBtn{background:#ffcc00;color:#000;}
.redeemBtn{background:#444;color:#fff;}
.registerBtn:hover{background:#ffdb4d; transform:scale(1.05);}
.redeemBtn:hover{background:#555; transform:scale(1.05);}

/* Feed jogadores */
.feed{
  margin-top:10px;
  width:90%; max-width:400px;
  background:#111;
  padding:10px; border-radius:12px;
  max-height:220px;
  overflow-y:auto;
}
.feed h3{margin-top:0;color:#ffcc00; text-align:center;}
.feed ul{list-style:none;padding:0;margin:0;}
.feed li{padding:5px 0; border-bottom:1px solid #222; font-size:0.95rem;}

/* Responsivo */
@media(max-width:480px){
  #multiplier{font-size:1.8rem;}
  #chartContainer{height:180px;}
  .bet-section button{padding:5px;}
}
</style>
</head>
<body>

<h1>Mini Trader Aviator</h1>

<div class="top-bar">
  <div class="balance-section">
    <span>Saldo: <span id="balance">100</span> MZN</span>
    <button id="cashoutBtn" disabled>Cashout</button>
  </div>
  <div class="bet-section">
    <input type="number" id="betInput" min="8" value="8">
    <button id="halfBtn">½</button>
    <button id="doubleBtn">×2</button>
    <button id="maxBtn">MAX</button>
  </div>
</div>

<div id="chartContainer">
  <canvas id="chart" width="400" height="220"></canvas>
  <div id="multiplier">1.00x</div>
</div>

<div class="modal" id="modalCashout">
  <div class="modal-content">
    <h2>Parabéns!</h2>
    <p>Ganhaste <span id="winValue">0</span> MZN!</p>
    <button class="registerBtn" id="redeemBtn">Resgatar</button>
  </div>
</div>

<div class="modal" id="modalRegister">
  <div class="modal-content">
    <h2>Registrar-se</h2>
    <p>Para resgatar seu valor, faça seu cadastro e um depósito mínimo de <strong>50 MZN</strong>.</p>
    <button class="registerBtn" id="goToSite">Ir para casa de apostas</button>
  </div>
</div>

<div class="feed">
  <h3>Jogadores online</h3>
  <ul id="playersList"></ul>
</div>

<script>
const betInput=document.getElementById("betInput");
const balanceEl=document.getElementById("balance");
const halfBtn=document.getElementById("halfBtn");
const doubleBtn=document.getElementById("doubleBtn");
const maxBtn=document.getElementById("maxBtn");
const cashoutBtn=document.getElementById("cashoutBtn");
const multiplierEl=document.getElementById("multiplier");
const canvas=document.getElementById("chart");
const ctx=canvas.getContext("2d");
const modalCashout=document.getElementById("modalCashout");
const modalRegister=document.getElementById("modalRegister");
const redeemBtn=document.getElementById("redeemBtn");
const goToSite=document.getElementById("goToSite");
const winValueEl=document.getElementById("winValue");
const playersList=document.getElementById("playersList");

let balance=100;
let betValue=8;
let multiplier=1.0;
let running=true;
let dataPoints=[];
let traderLocked=false;

// 50 jogadores iniciais
const playerNames=["Ana","Bruno","Carla","David","Elisa","Filipe","Gabriela","Hugo","Isabel","João","Karina","Luis","Maria","Nuno","Olivia","Paulo","Quim","Rita","Sara","Tiago","Ursula","Vera","Walter","Xavier","Yara","Zé"];
for(let i=0;i<50;i++){
  const li=document.createElement("li");
  const name=playerNames[Math.floor(Math.random()*playerNames.length)];
  const val=(Math.random()*50+10).toFixed(2);
  li.textContent=`${name} retirou ${val} MZN`;
  playersList.appendChild(li);
}

// Funções aposta Aviator
function updateBet(val){ 
  val=Math.max(8,Math.min(val,balance));
  betInput.value=val;
  betValue=val;
}
betInput.addEventListener("input",()=>updateBet(parseFloat(betInput.value)));
halfBtn.addEventListener("click",()=>updateBet(Math.floor(balance/2)));
doubleBtn.addEventListener("click",()=>updateBet(Math.min(balance,betValue*2)));
maxBtn.addEventListener("click",()=>updateBet(balance));

// Trader automático
function updateChart(){
  if(!running) return;
  multiplier*=1 + (Math.random()*0.02-0.005); // sobe/desce aleatório
  multiplier=Math.max(1.00,multiplier);
  multiplierEl.textContent=multiplier.toFixed(2)+"x";
  dataPoints.push(multiplier);
  if(dataPoints.length>canvas.width) dataPoints.shift();
  
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.beginPath();
  ctx.moveTo(0,canvas.height-(dataPoints[0]-1)*40);
  for(let i=1;i<dataPoints.length;i++){
    ctx.lineTo(i,canvas.height-(dataPoints[i]-1)*40);
  }
  ctx.strokeStyle="#ffcc00";
  ctx.lineWidth=2;
  ctx.stroke();
  
  requestAnimationFrame(updateChart);
}

// Cashout
function doCashout(){
  running=false;
  const win=(betValue*multiplier).toFixed(2);
  balanceEl.textContent=(parseFloat(balanceEl.textContent)+parseFloat(win)).toFixed(2);
  winValueEl.textContent=win;
  modalCashout.classList.add("active");
  traderLocked=true;
}

// Eventos
cashoutBtn.addEventListener("click",()=>{if(!traderLocked) doCashout();});
redeemBtn.addEventListener("click",()=>{
  modalCashout.classList.remove("active");
  modalRegister.classList.add("active");
});
goToSite.addEventListener("click",()=>window.location.href="https://go.aff.betvivo.partners/wydkfw29");

// Inicializar
cashoutBtn.disabled=false;
updateChart();
</script>

</body>
</html>
