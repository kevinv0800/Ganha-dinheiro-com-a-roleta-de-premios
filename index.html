<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Passa Tempo ICE 2026</title>
    <style>
        :root {
            --primary: #ff4d6d;
            --secondary: #c9184a;
            --bg: #fff0f3;
            --gold: #FFD700;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Inter', sans-serif; }

        body {
            margin: 0; padding: 0;
            background: var(--bg);
            height: 100vh;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        .heart-particle {
            position: absolute; color: var(--primary);
            font-size: 20px; pointer-events: none;
            animation: float 6s infinite linear; opacity: 0;
        }
        @keyframes float {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .container {
            width: 92%; max-width: 400px;
            background: white; border-radius: 25px;
            padding: 25px; text-align: center;
            box-shadow: 0 15px 35px rgba(201, 24, 74, 0.2);
            border: 2px solid var(--primary);
            position: relative; z-index: 10;
        }

        h1 { color: var(--secondary); margin: 0; font-size: 1.3rem; text-transform: uppercase; letter-spacing: 1px; }
        
        .timer-box {
            background: var(--bg);
            border-radius: 50%;
            width: 60px; height: 60px;
            line-height: 60px;
            margin: 10px auto;
            border: 3px solid var(--primary);
            font-size: 1.5rem; font-weight: 900; color: var(--secondary);
        }
        
        .btn-option {
            width: 100%; background: white;
            color: var(--secondary); border: 2px solid var(--primary);
            padding: 12px; border-radius: 12px;
            font-weight: 600; margin: 6px 0;
            cursor: pointer; transition: 0.2s;
            text-align: left; font-size: 0.9rem;
        }
        .btn-option:active { background: var(--primary); color: white; }

        .btn-start {
            width: 100%; background: var(--primary);
            color: white; border: none; padding: 15px;
            border-radius: 12px; font-weight: bold; margin-top: 10px; cursor: pointer;
        }

        .theme-tag {
            font-size: 0.7rem; background: var(--bg); color: var(--secondary);
            padding: 4px 12px; border-radius: 20px; font-weight: bold;
            display: inline-block; margin-bottom: 5px;
        }

        .hidden { display: none; }
        .info { font-size: 0.75rem; color: #888; margin-top: 10px; }
        #question-text { font-size: 1rem; font-weight: 600; min-height: 50px; margin: 10px 0; color: #333; }
        
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <div id="hearts"></div>

    <div class="container">
        <div id="screen-start">
            <h1>ICE 2026</h1>
            <p style="font-size: 0.8rem; color: var(--primary); font-weight: bold;">PASSA TEMPO PREMIUM</p>
            <input type="text" id="username" placeholder="Seu nome" style="width:100%; padding:12px; border-radius:10px; border:1px solid #ddd; outline:none; text-align:center;">
            <button class="btn-start" onclick="initGame()">COME√áAR DESAFIO</button>
            <p class="info">REGRAS:<br>‚Ä¢ 30s por quest√£o<br>‚Ä¢ Se errar, pula para a pr√≥xima<br>‚Ä¢ 2 erros = Bloqueio permanente</p>
        </div>

        <div id="screen-game" class="hidden">
            <div id="theme-label" class="theme-tag">TEMA</div>
            <div id="progress" style="font-size: 0.85rem; color: var(--primary); font-weight: bold;">Quest√£o 1/10</div>
            
            <div class="timer-box" id="clock">30</div>
            
            <div id="question-text"></div>
            <div id="options-container"></div>
            
            <div class="info" id="try-info" style="color: var(--secondary); font-weight: bold;">ERROS ACUMULADOS: 0/2</div>
        </div>

        <div id="screen-fail" class="hidden">
            <h1 style="color: #444;">üíî BLOQUEADO</h1>
            <p id="fail-reason">Voc√™ atingiu o limite de erros.</p>
            <p style="font-size: 0.7rem;">Este dispositivo foi banido do jogo ICE 2026.</p>
        </div>

        <div id="screen-win" class="hidden">
            <h1 style="color: var(--secondary);">üèÜ VENCEDOR!</h1>
            <p id="win-msg" style="padding: 10px; font-size: 0.9rem;"></p>
            <div style="font-size: 3rem; animation: pulse 1s infinite;">üíñ</div>
        </div>
    </div>

    <script>
        const quizData = [
            { t: "AVENTURA", q: "Quem libertou o povo do Egito e abriu o Mar Vermelho?", o: ["Abra√£o", "Mois√©s", "No√©", "Davi"], a: 1 },
            { t: "AMOR", q: "Qual o nome feminino que rima com 'Bem' e 'Vem'?", o: ["Karen", "Maria", "Ana", "Carla"], a: 0 },
            { t: "CARROS", q: "Qual destas √© uma famosa marca de carros japonesa?", o: ["Fiat", "BMW", "Nissan", "Renault"], a: 2 },
            { t: "PA√çSES", q: "Em que pa√≠s se encontra a Torre Eiffel?", o: ["It√°lia", "Alemanha", "Fran√ßa", "Espanha"], a: 2 },
            { t: "ROMANCE", q: "Qual flor √© o s√≠mbolo universal dos namorados?", o: ["Girassol", "Rosa", "Margarida", "Orqu√≠dea"], a: 1 },
            { t: "AVENTURA", q: "Qual oceano banha a costa de Mo√ßambique?", o: ["Atl√¢ntico", "√çndico", "Pac√≠fico", "√Årtico"], a: 1 },
            { t: "CARROS", q: "Qual destas cores √© a mais ic√¥nica da marca Ferrari?", o: ["Azul", "Amarelo", "Preto", "Vermelho"], a: 3 },
            { t: "PA√çSES", q: "Luanda √© a capital de qual pa√≠s africano?", o: ["Mo√ßambique", "√Åfrica do Sul", "Angola", "Nam√≠bia"], a: 2 },
            { t: "AMOR", q: "Qual o dia oficial de S√£o Valentim em muitos pa√≠ses?", o: ["12 de Junho", "14 de Fevereiro", "25 de Dezembro", "01 de Janeiro"], a: 1 },
            { t: "MIST√âRIO", q: "Qual √© o limite de erros permitidos antes do bloqueio?", o: ["1", "5", "2", "Ilimitados"], a: 2 }
        ];

        let current = 0;
        let timeLeft = 30;
        let timerFunc;
        let totalErrors = parseInt(localStorage.getItem('ice_2026_errors')) || 0;
        const maxErrors = 2;

        // Efeito de fundo
        setInterval(() => {
            const h = document.createElement('div');
            h.className = 'heart-particle'; h.innerHTML = '‚ù§Ô∏è';
            h.style.left = Math.random() * 100 + 'vw';
            document.getElementById('hearts').appendChild(h);
            setTimeout(() => h.remove(), 6000);
        }, 500);

        function initGame() {
            const name = document.getElementById('username').value.trim();
            if(!name) return alert("Por favor, digite seu nome!");
            
            if(localStorage.getItem('ice_2026_blocked') === 'true' || totalErrors >= maxErrors) {
                showScreen('screen-fail'); return;
            }
            
            localStorage.setItem('ice_2026_name', name);
            showScreen('screen-game');
            loadQuestion();
        }

        function loadQuestion() {
            if(current >= quizData.length) { 
                victory(); 
                return; 
            }
            
            const data = quizData[current];
            document.getElementById('theme-label').innerText = `TEMA: ${data.t}`;
            document.getElementById('progress').innerText = `Quest√£o ${current + 1} de 10`;
            document.getElementById('question-text').innerText = data.q;
            document.getElementById('try-info').innerText = `ERROS ACUMULADOS: ${totalErrors}/${maxErrors}`;
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            data.o.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'btn-option';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(idx);
                container.appendChild(btn);
            });

            startTimer();
        }

        function startTimer() {
            clearInterval(timerFunc);
            timeLeft = 30;
            document.getElementById('clock').innerText = timeLeft;
            document.getElementById('clock').style.color = "var(--secondary)";

            timerFunc = setInterval(() => {
                timeLeft--;
                document.getElementById('clock').innerText = timeLeft;
                if(timeLeft <= 10) document.getElementById('clock').style.color = "red";

                if(timeLeft <= 0) {
                    clearInterval(timerFunc);
                    document.getElementById('fail-reason').innerText = "O tempo acabou!";
                    registerFail();
                }
            }, 1000);
        }

        function checkAnswer(choice) {
            if(choice === quizData[current].a) {
                // Acertou
                current++;
                loadQuestion();
            } else {
                // Errou
                totalErrors++;
                localStorage.setItem('ice_2026_errors', totalErrors);
                
                if(totalErrors >= maxErrors) {
                    document.getElementById('fail-reason').innerText = "Voc√™ atingiu o limite de 2 erros.";
                    registerFail();
                } else {
                    alert("Resposta errada! Passando para a pr√≥xima quest√£o...");
                    current++; // Pula para a pr√≥xima quest√£o automaticamente
                    loadQuestion();
                }
            }
        }

        function registerFail() {
            clearInterval(timerFunc);
            localStorage.setItem('ice_2026_blocked', 'true');
            showScreen('screen-fail');
        }

        function victory() {
            clearInterval(timerFunc);
            const name = localStorage.getItem('ice_2026_name');
            document.getElementById('win-msg').innerText = `PARAB√âNS, ${name.toUpperCase()}! Voc√™ completou o desafio e encontrou Mois√©s, Karen e Nissan!`;
            showScreen('screen-win');
        }

        function showScreen(id) {
            document.querySelectorAll('.container > div').forEach(d => d.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        window.onbeforeunload = function() {
            if(!document.getElementById('screen-game').classList.contains('hidden')) {
                localStorage.setItem('ice_2026_blocked', 'true');
            }
        };

        if(localStorage.getItem('ice_2026_blocked') === 'true') showScreen('screen-fail');
    </script>
</body>
</html>
