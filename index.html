<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Trader Aviator</title>
<style>
body{margin:0;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background:#111;color:#fff;display:flex;flex-direction:column;align-items:center;padding:10px;overflow-x:hidden;}
#loginScreen{position:fixed;top:0;left:0;width:100%;height:100%;background:#111;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:2000;}
#loginScreen input{margin:8px 0;padding:10px;width:250px;border-radius:8px;border:none;text-align:center;}
#loginScreen button{margin-top:10px;padding:12px 25px;border:none;border-radius:10px;background:#ffcc00;color:#000;font-weight:bold;cursor:pointer;transition:0.3s;}
#loginScreen button:hover{opacity:0.8;}

.top-bar{width:90%;max-width:400px;background:#222;padding:10px 15px;border-radius:12px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;font-weight:bold;font-size:1.1rem;}

#chartContainer{width:90%;max-width:400px;height:220px;background:#222;border-radius:15px;margin-bottom:10px;overflow:hidden;position:relative;box-shadow:0 0 25px rgba(255,204,0,0.4);}
canvas{display:block;}
#multiplier{position:absolute;top:10px;left:50%;transform:translateX(-50%);font-size:2.2rem;font-weight:bold;color:#ffcc00;text-shadow:0 0 15px rgba(255,204,0,0.8);}
#cashLine{position:absolute;bottom:0;left:0;height:2px;width:0;background:#0f0;transition:width 0.1s;}

.bet-bar{width:90%;max-width:400px;display:flex;justify-content:space-between;align-items:center;background:#222;padding:10px;border-radius:12px;margin-bottom:10px;}
.bet-bar input[type=number]{flex:1;padding:6px;border-radius:8px;border:none;text-align:center;}
.bet-bar button{margin-left:6px;padding:6px 10px;border:none;border-radius:8px;background:#ffcc00;color:#000;font-weight:bold;cursor:pointer;transition:0.3s;}
.bet-bar button:hover{opacity:0.8;}

.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity 0.3s ease;z-index:1000;}
.modal.active{opacity:1;visibility:visible;}
.modal-content{background:#2a2a2a;padding:25px;border-radius:15px;max-width:400px;width:90%;text-align:center;animation:slideUp 0.4s ease;box-shadow:0 8px 25px rgba(0,0,0,0.6);}
@keyframes slideUp{from{transform:translateY(50px);opacity:0;}to{transform:translateY(0);opacity:1;}}
.modal-content h2{margin-bottom:15px;color:#ffcc00;}
.modal-content p{margin-bottom:20px;line-height:1.5;}
.modal-content button{margin:10px;padding:12px 20px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;transition:0.3s;}
.registerBtn{background:#ffcc00;color:#000;}
.redeemBtn{background:#444;color:#fff;}
.registerBtn:hover{background:#ffdb4d;transform:scale(1.05);}
.redeemBtn:hover{background:#555;transform:scale(1.05);}

.feed{margin-top:10px;width:90%;max-width:400px;background:#111;padding:10px;border-radius:12px;max-height:220px;overflow-y:auto;}
.feed h3{margin-top:0;color:#ffcc00;text-align:center;}
.feed ul{list-style:none;padding:0;margin:0;}
.feed li{padding:5px 0;border-bottom:1px solid #222;font-size:0.95rem;}

@media(max-width:480px){#multiplier{font-size:1.8rem;}#chartContainer{height:180px;}.bet-bar button{padding:5px;}}
</style>
</head>
<body>

<div id="loginScreen">
  <h2>Bem-vindo!</h2>
  <input type="text" id="playerName" placeholder="Digite seu nome">
  <input type="text" id="playerPhone" placeholder="Número de celular">
  <button id="enterBtn">Entrar</button>
</div>

<div class="top-bar">
  <span>Saldo: <span id="balance">100</span> MZN</span>
  <button id="cashoutBtn" disabled>Cashout</button>
</div>

<div id="chartContainer">
  <canvas id="chart" width="400" height="220"></canvas>
  <div id="multiplier">1.00x</div>
  <div id="cashLine"></div>
</div>

<div class="bet-bar">
  <input type="number" id="betInput" min="8" value="8">
  <button id="halfBtn">½</button>
  <button id="doubleBtn">×2</button>
  <button id="maxBtn">MAX</button>
</div>

<div class="modal" id="modalCashout">
  <div class="modal-content">
    <h2>Parabéns!</h2>
    <p>Ganhaste <span id="winValue">0</span> MZN!</p>
    <button class="registerBtn" id="redeemBtn">Resgatar</button>
  </div>
</div>

<div class="modal" id="modalRegister">
  <div class="modal-content">
    <h2>Registrar-se</h2>
    <p>Para resgatar seu valor, faça seu cadastro e um depósito mínimo de <strong>50 MZN</strong>.</p>
    <button class="registerBtn" id="goToSite">Ir para casa de apostas</button>
  </div>
</div>

<div class="feed">
  <h3>Jogadores online</h3>
  <ul id="playersList"></ul>
</div>

<script>
const loginScreen=document.getElementById("loginScreen");
const enterBtn=document.getElementById("enterBtn");
const playerNameInput=document.getElementById("playerName");
const playerPhoneInput=document.getElementById("playerPhone");

const balanceEl=document.getElementById("balance");
const betInput=document.getElementById("betInput");
const halfBtn=document.getElementById("halfBtn");
const doubleBtn=document.getElementById("doubleBtn");
const maxBtn=document.getElementById("maxBtn");
const cashoutBtn=document.getElementById("cashoutBtn");
const multiplierEl=document.getElementById("multiplier");
const cashLine=document.getElementById("cashLine");
const canvas=document.getElementById("chart");
const ctx=canvas.getContext("2d");
const modalCashout=document.getElementById("modalCashout");
const modalRegister=document.getElementById("modalRegister");
const redeemBtn=document.getElementById("redeemBtn");
const goToSite=document.getElementById("goToSite");
const winValueEl=document.getElementById("winValue");
const playersList=document.getElementById("playersList");

let balance=100;
let betValue=8;
let multiplier=1.0;
let running=false;
let dataPoints=[];
let traderLocked=false;

// Jogadores online
const playerNames=["Ana","Bruno","Carla","David","Elisa","Filipe","Gabriela","Hugo","Isabel","João","Karina","Luis","Maria","Nuno","Olivia","Paulo","Quim","Rita","Sara","Tiago","Ursula","Vitor","Xavier","Yara","Zé"];
for(let i=0;i<50;i++){
  const li=document.createElement("li");
  const name=playerNames[Math.floor(Math.random()*playerNames.length)];
  const value=(Math.random()*50+5).toFixed(2);
  li.textContent=`${name} fez cashout ${value}x`;
  playersList.appendChild(li);
}

// Entrar no jogo
enterBtn.addEventListener("click",()=>{
  if(playerNameInput.value.trim()=="" || playerPhoneInput.value.trim()==""){alert("Preencha nome e telefone!");return;}
  loginScreen.style.display="none";
  startTrader();
});

// Atualizar aposta
function updateBet(val){betValue=Math.max(8,Math.min(balance,val)); betInput.value=betValue;}
halfBtn.addEventListener("click",()=>updateBet(Math.floor(betValue/2)));
doubleBtn.addEventListener("click",()=>updateBet(Math.min(balance,betValue*2)));
maxBtn.addEventListener("click",()=>updateBet(balance));
betInput.addEventListener("input",()=>updateBet(parseInt(betInput.value)));

// Trader tipo Aviator com crash e flash
function startTrader(){
  running=true;
  cashoutBtn.disabled=false;
  multiplier=1.0;
  dataPoints=[];
  let crash=false;
  function step(){
    if(!running) return;
    multiplier*=(1 + (Math.random()*0.03-0.005));
    multiplier=Math.max(1.00,multiplier);
    if(Math.random()<0.002 && !crash){ // crash aleatório
      crash=true;
      running=false;
      flashCrash();
    }
    multiplierEl.textContent=multiplier.toFixed(2)+"x";
    cashLine.style.width=((multiplier-1)/(10-1)*100)+"%";
    
    dataPoints.push(multiplier);
    if(dataPoints.length>canvas.width) dataPoints.shift();
    
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.beginPath();
    ctx.moveTo(0,canvas.height-(dataPoints[0]-1)*35);
    for(let i=1;i<dataPoints.length;i++){
      ctx.lineTo(i,canvas.height-(dataPoints[i]-1)*35);
    }
    ctx.strokeStyle="#ffcc00";
    ctx.lineWidth=2;
    ctx.stroke();
    
    requestAnimationFrame(step);
  }
  step();
}

// Flash de crash
function flashCrash(){
  document.body.style.transition="0.2s";
  document.body.style.background="#ff0";
  setTimeout(()=>document.body.style.background="#111",200);
}

// Cashout
function doCashout(){
  if(traderLocked || !running) return;
  running=false;
  const win=(betValue*multiplier).toFixed(2);
  balance=parseFloat(balance)+parseFloat(win);
  balanceEl.textContent=balance.toFixed(2);
  winValueEl.textContent=win;
  modalCashout.classList.add("active");
  traderLocked=true;
}

// Eventos modais
cashoutBtn.addEventListener("click",doCashout);
redeemBtn.addEventListener("click",()=>{
  modalCashout.classList.remove("active");
  modalRegister.classList.add("active");
});
goToSite.addEventListener("click",()=>window.location.href="https://go.aff.betvivo.partners/wydkfw29");

// Bloquear voltar
history.pushState(null,null,location.href);
window.onpopstate=function(){history.go(1);}
</script>
</body>
</html>
